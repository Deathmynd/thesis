%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{ОБЛАЧНЫЕ СИСТЕМЫ КАК ПЛАТФОРМА ДЛЯ АНАЛИЗА ДАННЫХ ЦЕЛЕВОЙ РЕКЛАМЫ}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Целевой аудиторией для разрабатываемой системы являются малый и средний бизнес, которые не готовы тратить значительные денежные и временные ресурсы на покупку программного обеспечения и установку необходимого оборудования. С этой точки зрения, для данной аудитории выгодно использование системы как услуги. На сегодняшний день такой подход позволяют реализовывать облачные технологии, которые развиваются все стремительнее.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Выбор типа облачной технологии для использования в системе таргетирования рекламы}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

С появлением сверхскоростных каналов передачи данных, облачные системы получили сильный толчок в развитии. Большие скорости позволили устранить влияние больших расстояний между компьютерами на выполнение совместных задач. Такое развитие способствовало переносу большого количества программного обеспечения в облако. На сегодняшний день все чаще встречаются продукты имеющие как версию для стационарного компьютера, так и онлайн версию, созданную с использованием облачных технологий.

Облачные технологии удобны как для поставщика услуг так и для потребителя. Поставщик услуг, или провайдер, предоставляет пользователю часть ресурсов в аренду. Если число клиентов позволяет постоянно загружать рабочие ресурсы, то провайдер получает значительную прибыль от арендной платы. Это позволяет ему быстро окупить затраты на приобретение дорогостоящего оборудования и разработку программного обеспечения.
С другой стороны, потребитель получает в свое распоряжение высокопроизводительные ресурсы, приобрести которые он не в состоянии. 

Выделяют три основных типа облачных платформ~\cite{sareen2013cloud}:

\begin{enumerate}
	\item IaaS (Infrastructure-as-a-Service) --- инфраструктура как сервис.
	Сюда относится организация аппаратной среды с организованными серверами, настроенными средствами коммуникации, устройствами хранения информации и средствами бесперебойного питаний. На потребителя ложится задача по развертыванию и настройке требуемой системы, установке общего и специализированного программного обеспечения;

	\item PaaS (Platform-as-a-Service) --- платформа как сервис.
	По сравнению с IaaS, в PaaS технологии уже настроена операционная система для выполнения приложений. Также, могут быть уже развернуты средства разработки, отладки и поддержки. Потребитель получает возможность развернуть и сопровождать специализированное программное обеспечение такое как, например, ПО для бухгалтерского учета;

	\item SaaS (Software-as-a-Service) --- программное обеспечение как сервис.
	В данном случае поставщик предоставляет пользователю доступ к программному обеспечению, которое разработано для решения определенного типа задач. Пользователь получает доступ только к эксплуатации программы. Ответственность за администрирование лежит на поставщике. К таким системам относятся многие CRM системы такие как amoCRM~\cite{amoCRMSite} или VtigerCRM~\cite{vtigerSite}.
\end{enumerate}

Разрабатываемая система таргетирования рекламы является программным продуктом, который удобнее использовать, если он уже развернут и настроен. Это значит, что в качестве технологии для организации системы удобнее всего использовать третий подход --- программное обеспечение как сервис (SaaS). Чтобы определить наиболее важные компоненты такой системы необходимо рассмотреть ее достоинства и недостатки. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Преимущества и недостатки размещения системы таргетированной рекламы в облачной инфраструктуре}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{Рассмотрим преимущества облачных систем.}

Первое преимущество помещения программного продукта в облако следует из их популярности. Облачные технологии очень удобны для конечного пользователя, что привлекает к их использованию большое количество компаний и частных лиц. Рассмотрим список наиболее важных преимуществ с точки зрения потребителя:

\begin{itemize}
	\item низкие материальные затраты. В отличии от обычного ПО, клиент не покупает программу в облаке, а берет ее в аренду, что значительно дешевле. Уменьшение затрат происходит и за счет устранения необходимости в производительном аппаратном обеспечении и обслуживающем его персонале;

	\item временная аренда. Клиент может в любой момент отказаться от использования продукта, если он его не устраивает;

	\item высокая надежность. Данные, хранимые на удаленных серверах всегда имеют резервную копию, что минимизирует вероятность их потери;

	\item защита от кражи данных. Провайдер облачных вычислений всегда принимает меры по защите данных от вирусных и хакерских угроз;

	\item своевременное обновление используемого ПО;

	\item мобильность. Облачный сервис доступен из любой точки, в которой у клиента есть доступ к интернету.  Также, большинство поставщиков услуг предоставляет возможность доступа из специально разработанного мобильного приложения.
\end{itemize}

Вторым преимуществом является возможность своевременного обновления программного обеспечения. Любая найденная ошибка или уязвимость может быть моментально устранена для всех клиентов облачной системы. Это является огромным плюсом с точки зрения безопасности, так как большинство эксплуатируемых уязвимостей программных и аппаратных систем находится именно в устаревшем ПО.

К третьему преимущество относится большое количество пользователей, являющихся в тоже время тестировщиками разработанной программы. Любая ошибка, случайным образом попавшая в рабочую версию системы будет быстро найдена и устранена благодаря обращениям клиентов. Однако это преимущество не должно исключать этап тестирования перед обновлением программы, т.к. выявленные клиентами ошибки плохо влияют на репутацию компании.

\textbf{Рассмотрим недостатки облачных систем.}

Главным недостатком облачной системы являются высокие требование к их надежности. Как было описано в преимуществах с точки зрения пользователя, облачная система должна гарантировать надежность хранимых данных. Для обеспечения этой надежности провайдерам необходимо заботиться о резервном копировании данных, бесперебойной работе оборудования, бесперебойном питании. Также необходимо постоянно поддерживать актуальность средств защиты от вирусных и хакерских атак.

Вторым недостатком является теоретическая возможность потери данных. Если шанс единовременной потери данных на основном и резервном сервере крайне мал, то возможность пострадать от уязвимости нулевого дня исключать не стоит~\cite{amoroso2013enterprise}. Уязвимостью нулевого дня называется ошибка в программном коде или аппаратуре о которой стало публично известно и у разработчика было 0 дней на ее исправление. Потеря данных или взлом сервера является большим ударом по авторитету компании и неминуемо приведет к многочисленным затратам, в том числе и  компенсации пользователям.

Третий минус относится как к недостаткам для поставщика услуги, так и для потребителя. В данной ситуации речь идет об интернет соединении. Разрыв в сети может возникнуть в любом месте между клиентом и сервером и это полностью прервет любые коммуникации между сторонами. Чтобы уменьшить риск отключения со стороны провайдера, ему необходимо позаботиться о резервной линии интернет соединения. В дополнение ко всему, поставщику услуг следует позаботиться не только о надежности соединения но и о ширине канала связи.

Рассмотрев основные недостатки облачных технологий становится понятна необходимость рассмотрения вопроса о безопасности пользовательских данных с которыми работает система. Следует отметить что под ответственность провайдера попадают как данные хранимые на сервере так и данные пересылаемые между сервером и клиентским приложением (браузером).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Проблемы безопасности облачных SaaS технологий и способы их решения}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Следует понимать что вопросов, касающихся безопасности много и не за все из них отвечает поставщик услуги. Некоторая ответственность возлагается и на потребителя.
Основными проблемами безопасности облачных вычислений являются следующие категории~\cite{khalil2014cloud}:

\begin{itemize}
	\item конфиденциальность и целостность персональных данных;
	\item защита от несанкционированного доступа;
	\item уязвимости программное обеспечение, используемого для поддержания работоспособности сервера;
	\item общие уязвимости web сервисов.
\end{itemize}

\textbf{Конфиденциальность и целостность персональных данных.}

Хранимая на сервере клиентская информация является самой ценной составляющей  всей облачной платформы с точки зрения пользователя. Защищенность хранимых данных и их конфиденциальность зачастую является самым важным аспектом при выборе оператора облачных вычислений. Из этого следует необходимость уделения особого внимания к вопросам безопасности клиентских данных.

К угрозам персональной информации относятся угрозы целостности хранимой информации и их конфиденциальности.

Целостность данных --- это гарантия, что данные не будут повреждены или потеряны в период действия договора между провайдером и потребителем облачных услуг. На целостность данных могут повлиять как физические так и программные факторы. Например, сбой в подаче электроэнергии может привести к потере несохраненной информации. Для минимизации такой угрозы следует иметь возможность перехода на резервный источник питания. Физическая невозможность считывания информации с носителя, связанная с его повреждением или устареванием приведет к потере части данных. Сбой в работе программного обеспечения способен навредить большому количеству клиентских данных. Потери такого характера практически невозможно восстановить имея единственный носитель информации. В связи с этим, лучшим вариантом обеспечения сохранности данных, является ее резервное копирование на дополнительных устройствах.

Другая угроза связана с конфиденциальностью информации.

Конфиденциальность информации — запрет передачи определенной информации посторонним  лицам без согласия ее обладателя. Например, конфиденциальность персональных данных — обязательное для соблюдения оператором или иным получившим доступ к персональным данным лицом требование: не допускать их распространения без согласия субъекта персональных данных или наличия иного законного основания~\cite{lopatnikovDict}.

Определение конфиденциальности информации накладывает на оператора ответственность за получение данных сторонними лицами. Утечка информации хоть и мало вероятна, однако возможна. Ее последствием может стать раскрытие такой информации о клиентах как номера телефонов, ФИО, год рождения, номера банковских карт. Это важная информация, которая может быть использована для кражи денежных средств или использования данных о личности в других махинациях. Существует много зафиксированных случаев утери информации с серверов крупных компаний. Например, крупная утечка информации с серверов компании eBay произошла в 2014 году~\cite{eBayPass}.

Для защиты от подобных инцидентов принято использовать шифрование хранимой информации. В том же случае с компанией eBay, украденная информация была зашифрована, что позволило избежать серьезных последствий. Существует два основных способа шифрования --- классический способ и использование гомоморфного шифрования. 

Классический способ подразумевает шифрование данных одним из алгоритмов симметричного шифрования, таких как AES, DES или RC4~\cite{sqlSecurity}. Проблема данного способа заключается в необходимости хранения ключей шифрования. Ключи шифрования должны храниться в месте, недоступном для злоумышленника, даже если он сумел получить данные клиентов.

Гомоморфное шифрование подразумевает возможность выполнения произвольных операций над зашифрованными данными, без необходимости расшифровывать их. Идея гомоморфного шифрования возникла в 1978 году а теоретическое доказательство ее возможности появилось только в 2009 году. Сейчас теория стремительно развивается и упрощается. Появляются некоторые реализации данного способа шифрования, например библиотека HElib от компании IBM~\cite{HElib}. Основной проблемой использования гомоморфного шифрования является его низкая производительность.

\textbf{Защита от несанкционированного доступа.}

Взлом учетных записи позволяет злоумышленнику получить доступ ко всему сервису. Доступ к приватной информации может быть получен как из внутренней так и из внешней сети приложения. 

Обиженные плохим отношением или малой зарплатой администраторы могут серьезно навредить безопасности организации. Права администратора позволяют делать что угодно во внутренней сети компании. Это может повлечь значительные финансовые потери или потери в производительности сервиса. В свою очередь это повлияет на репутацию бренда. Чтобы избежать проблемы с человеческим фактором необходимо тщательно подбирать рабочий персонал и следить за работой сотрудников.

Следует помнить и об API облачной системы. Обычно API находится в открытом доступе и имеет хорошую документацию. Это позволяет любому разработчику в своей программе взаимодействовать с облачной средой. API, легко может быть использовано и в десктопном и в мобильном приложении так как, зачастую, оно реализовано по протоколу http или https. Доступность и понятность программного интерфейса может сыграть и отрицательную роль, так как открывает новый вектор атак для злоумышленника. Плохо продуманный с точки зрения безопасности интерфейс привнесет в систему множество уязвимостей, недоступных в веб-интерфейсе системы. API позволяет злоумышленники многократно использовать токен доступа к системе, а при получении несанкционированный доступ к учетным записям скачивать конфиденциальную информацию и осуществлять любые манипуляции от имени пользователя.

Для того чтобы риск взлома был минимален, следует подобрать качественный способ авторизации и аутентификации пользователей. Существует три основных типа аутентификации, основанных на трех специальных факторах~\cite{pandya2015overview}:

\begin{itemize}
	\item что-то что вы знаете --- это может быть специальной секретной информацией, такой как пароль или ответ на секретный вопрос, который не известен никому. Это фактор знания;
	\item что-то что вы имеете --- это предмет которым вы владеете, такой как смарт карта или другие подобные электронные устройства. Это фактор владения;
	\item что-то что является вашей часть --- это физическое свойство, такое как отпечаток пальца или голос, которые позволяют вас идентифицировать. Это фактор неотъемлемости.
\end{itemize}

В веб-приложениях обычно используется первый тип аутентификации. К этому типу относятся следующие методы аутентификации, которые давно и успешно используются во многих системах~\cite{DataArt}:

\begin{itemize}
	\item аутентификация по паролю;
	\item аутентификация по сертификатам. Как правило, используются сертификаты стандарта X.509, которые позволяют установить обе стороны общения;
	\item аутентификация по одноразовым паролям. Сюда относятся программные и аппаратные токены для генерации паролей, коды получаемые пользователем по смс, заранее подготовленные списки одноразовых паролей;
	\item аутентификация по ключам доступа. Этот способ часто применяется в API веб-приложений. Сервером генерируется специальный ключ, заменяющий логин и пароль, который в дальнейшем используется в приложении для взаимодействия с сервисом;
	\item аутентификация по токенам. Этот способ применяется при построении распределенных систем, где один сервис доверяет функцию аутентификации другому. Такой метод можно наблюдать при аутентификации в каком либо приложении через социальную сеть.
\end{itemize}

\textbf{Уязвимости программного обеспечения.}

Программное обеспечение, поддерживающее работоспособность сервера так же подвержено рискам быть атакованными~\cite{volkov2015analize}. Сюда относятся так же атаки на операционные системы и используемые сетевые протоколы. Для предотвращения таких атак достаточно использовать межсетевые экраны и системы обнаружения и предотвращения вторжений. Такие подсистемы позволяют экранировать уязвимости операционной системы и приложений до момента, когда будут установлены важные обновления. Такие системы устанавливаются в виде программного агента, что позволяет экранировать уязвимости, обнаруженные в ОС и приложениях: защита от любых атак на известные уязвимости без установки критических обновлений; блокировка атак типа XSS (Cross Site Scripting) и SQL-Injection.

\textbf{Общие уязвимости веб-сервисов.}

Все уязвимости веб-сервисов распространяются также и на облачные SaaS системы, так как с точки зрения внешнего пользователя облако имеет такой же интерфейс. Ежегодно, сообществом OWASP публикуется Топ-10 уязвимостей веб-приложений.

OWASP – это открытый проект обеспечения безопасности веб-приложений. Топ-10 уязвимостей от OWASP представляет собой перечень наиболее критичных рисков безопасности приложений и отражает текущие проблемы в области ИБ. 

В 2017 году этот список представлен следующими пунктами~\cite{OWASP}:

\begin{itemize}
	\item A1 --- внедрение кода;
	\item A2 --- некорректная аутентификация и управление сессией;
	\item A3 --- межсайтовый скриптинг;
	\item A4 --- небезопасные прямые ссылки на объекты;
	\item A5 --- небезопасная конфигурация;
	\item A6 --- утечка чувствительных данных;
	\item A7 --- отсутствие контроля доступа к функциональному уровню;
	\item A8 --- подделка межсайтовых запросов;
	\item A9 --- использование компонентов с известными уязвимостями;
	\item A10 --- невалидированные редиректы.
\end{itemize}

Большинство из этих уязвимостей давно известны, как и способы защиты от них. Проблема их распространения заключается в том, что при разработке веб-приложений безопасности уделяется мало внимания. Это приводит к тому что современные веб ресурсы могут быть подвержены уязвимости десятилетней давности.

Рассмотренные угрозы безопасности и методы их решения относились к части облачных вычислений, которые находятся на стороне сервиса. Далее рассмотрим не менее важный аспект безопасности пользовательских данных --- это защита информации в каналах связи.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Безопасность клиентских данных в каналах связи}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Самый распространенный протокол прикладного уровня для передачи данных в сети интернет это http протокол. Он включает в себя большое количество полей, что делает его удобным для различных задач --- от отправки коротких сообщений, до передачи файлов. Тем не менее, с точки зрения безопасности http протокол никак не защищен. Простое прослушивание трафика между клиентом и сервером раскрывает всю информацию, передаваемую в канале связи. Для того чтобы защитить частную информацию был разработан протокол SSL, позднее переросший в TLS. В данной пункте будет рассмотрен принцип работы SSL/TLS протокола. 

TLS протокол работает над транспортным TCP протоколом. Это делает его удобным для использования с вышестоящими протоколами такими как HTTP. Место протокола TLS показано на рис.\ref{fig:TLSinTCPIP} Таким образом, при использовании TLS, HTTP протокол никак не изменяется. Именно комбинацией TLS и HTTP и является протокол HTTPS, который работает на 443 порту.

\begin{figure}[h]
	\centering
	\includegraphics[width=\linewidth/3]{fig/tls}
	\caption{Место протокола TLS в стеке TCP/IP}
	\label{fig:TLSinTCPIP}
\end{figure}

Последней версией протокола на данный момент является TLS 1.3. Так как это протокол утвержден не так давно~\cite{Kinsta} ---  в начале 2018 года, наиболее популярной сейчас версией является TLS 1.2.

Протокол TLS обеспечивает три функции для вышестоящих протоколов:

\begin{itemize}
	\item шифрование --- информативная часть сообщения в канале связи не может быть прочитана третьей стороной;
	\item аутентификация --- гарантия того, что собеседники являются именно теми за кого себя выдают;
	\item целостность --- обнаружение подмены всего сообщения или его частей.
\end{itemize}

Взаимодействие клиента с сервером происходит в два этапа:

\begin{itemize}
	\item установление TLS-сессии;
	\item передача данных по зашифрованному каналу.
\end{itemize}

Процесс установления сессии состоит из нескольких шагов:
\begin{itemize}
	\item аутентификация;
	\item установление криптографических алгоритмов для обоих этапов;
	\item генерация общего секретного мастер-ключа;
	\item формирование на основе мастер-ключа общего сеансового ключа для защиты информационных сообщений.
\end{itemize}

\textbf{Шифрование.}

В протоколе используется как асимметричное, так и симметричное шифрование. Это связано с тем, что асимметричное шифрования более ресурсоемко по сравнению с симметричным. Проблемой же симметричного шифрования является необходимость в общем секретном ключе. Обе стороны должны знать секретный ключ для поддержания зашифрованного канала. Таким образом, комбинация двух типов шифрования позволяет исключить недостатки каждого из них. С помощью асимметричного шифрования стороны договариваются об общем секретном ключе, который в дальнейшем используют в шифрованном канале связи. В TLS используются системы асимметричного шифрования RSA, Диффи-Хеллмана и их модификации. Алгоритм шифрования Диффи-Хеллмана является более современным и позволяет обеспечить прогрессивную секретность. Это значит, что при компрометации секретного ключа, записанные ранее сообщения расшифровать не удастся.

\textbf{Аутентификация --- сертификаты.}

Сертификаты позволяют привязывать открытый ключ к некоторому сетевому имени. Сертификат не несет в себе какую-либо секретную информацию. Самая важная информация заключенная в нем --- это открытый ключ, доменное имя или ip-адрес и цифровая подпись. Открытый ключ используется при шифровании сообщений и может быть подменена третьей стороной. Для того чтобы выявить факт подмены была разработана система удостоверяющих центров(УЦ). Для того чтобы система работала, вводится допущение о том, что пользователь доверяет центру сертификации. Центр сертификации гарантирует соответствие доменного имени и открытого ключа.

SSL сертификат состоит из двух условных частей. Первая часть эта передаваемая в открытом виде информации. Вторая часть --- это цифровая подпись удостоверяющего центра. Если злоумышленник сумеет подменить сертификат, то принимающая сторона сможет выявить эту подмену. Цифровая подпись это контрольная сумма от открытой части сертификата, зашифрованная закрытым ключом центра сертификации. Для составления контрольный суммы используются криптосистемы RSA и ECDSA. Таким образом, для проверки валидности данных достаточно посчитать контрольную сумму от открытой части сертификата и сравнить ее с контрольной суммой, полученной после расшифровывания подписи открытым ключом центра сертификации.

Доменных имен в интернете очень много и поэтому центры сертификации всегда делегируют свои полномочия между другими организациями и дочерними компаниями. В свою очередь дочерние УЦ так же способны распределять свои обязанность. Это порождает цепочку из удостоверяющих центров, что благодаря системе подписей не мешает корректной проверке сертификата. Пользователю необходимо доверять лишь УЦ верхнего уровня, чтобы проверить всю последовательность.

Для обеспечения большей надежности, сертификаты выдаются на определенный срок. Также, они могут быть отозваны центром сертификации при их компрометации. Для проверки статуса сертификата используется протокол OCSP~\cite{OCSP}.

\textbf{Целостность.}

Для обнаружения подмены сообщения используется механизм HMAC (hash-based message authentication code --- код аутентификации сообщения), называемый также имитовставкой. HMAC использует криптографическую хеш функцию для подсчета контрольной суммы передаваемого сообщения. Полученное значение вставляется в конец сообщения. Предполагается, что подделка HMAC вычислительно недостижима, без знания секретного ключа. Получается, что подмена сообщения, как и в случае с сертификатом, будет сразу выявлена на стороне получателя.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Резюме}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

В данной главе рассмотрены типы облачных систем их преимущества и недостатки. В результате, выделена технология SaaS, как наиболее подходящая для размещения компонента генерации рекламных событий. Рассмотрены угрозы безопасности данных на сервере облачных технологи и методы их устранения. Рассмотрены угрозы информации в каналах передачи данных. Рассмотрена структура TLS протокола, как способа защиты данных в каналах связи.

